/**
 * This ruleset has been modified for public access.
 *
 * Core Philosophy:
 * The security model has been opened for public access. It allows any client, authenticated or not,
 * to read and write to the database. This is generally not recommended for production environments.
 *
 * Data Structure:
 * - /choirs/{choirId}: Contains information about each choir group.
 * - /choirs/{choirId}/members/{admissionNumber}: A sub-collection tracking which students are in which choir.
 * - /students/{admissionNumber}: Contains general information about each student.
 * - /choir_attendance/{attendanceId}: Stores attendance records for choir practices.
 * This structure is designed for performance and scalability.
 *
 * Key Security Decisions:
 * - Public Access: All access to data (read, write, delete) is public.
 * - No Data Shape Validation: The focus is solely on authorization, not schema enforcement.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Manages choir groups. Any user can create, read, or write choir data.
     */
    match /choirs/{choirId} {
      allow read, write: if true;
      
      /**
       * @description Manages members within a specific choir.
       */
      match /members/{admissionNumber} {
        allow read, write: if true;
      }
    }

    /**
     * @description Manages student records. Any user can read or write student data.
     */
    match /students/{admissionNumber} {
      allow read, write: if true;
    }

    /**
     * @description Manages choir attendance records.
     */
    match /choir_attendance/{attendanceId} {
      allow read, write: if true;
    }
  }
}
